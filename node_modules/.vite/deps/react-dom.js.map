{
  "version": 3,
  "sources": ["../../../packages/react-dom/src/root.ts", "../../../packages/react-reconciler/src/workTags.ts", "../../../packages/react-reconciler/src/fiberFlags.ts", "../../../packages/react-reconciler/src/fiber.ts", "../../../packages/react-reconciler/src/updateQueue.ts", "../../../packages/react-dom/src/hostConfig.ts", "../../../packages/react-reconciler/src/childFibers.ts", "../../../packages/shared/internals.ts", "../../../packages/react-reconciler/src/fiberHooks.ts", "../../../packages/react-reconciler/src/beginWork.ts", "../../../packages/react-reconciler/src/completeWork.ts", "../../../packages/react-reconciler/src/commitWork.ts", "../../../packages/react-reconciler/src/workLoop.ts", "../../../packages/react-reconciler/src/fiberReconciler.ts", "../../../packages/react-dom/index.ts"],
  "sourcesContent": ["import { createContainer, updateContainer } from \"../../react-reconciler/src/fiberReconciler\";\r\nimport { Container } from \"./hostConfig\";\r\nimport { ReactElementType } from \"shared/ReactTypes\";\r\n\r\nexport function createRoot(container: Container) {\r\n  const root = createContainer(container);\r\n  return {\r\n    render(element: ReactElementType) {\r\n      updateContainer(element, root);\r\n    }\r\n  };\r\n}\r\n", "export const FunctionComponent = 0;\r\nexport const HostRoot = 3;\r\nexport const HostComponent = 5;\r\nexport const HostText = 6;\r\n\r\nexport type WorkTag = \r\n  | typeof FunctionComponent \r\n  | typeof HostRoot \r\n  | typeof HostComponent \r\n  | typeof HostText;\r\n", "export type Flags = number;\r\nexport const NoFlags = 0b000000;\r\nexport const Placement = 0b000001;\r\nexport const Update = 0b000010;\r\nexport const ChildDeletion = 0b000100;\r\nexport const MutationMask = Placement | Update | ChildDeletion;\r\n\r\n", "import { Props, Key, Ref, ReactElementType } from 'shared/ReactTypes';\r\nimport { FunctionComponent, WorkTag, HostComponent } from './workTags';\r\nimport { Flags, NoFlags } from './fiberFlags';\r\nimport { Container } from '../../react-dom/src/hostConfig';\r\nimport { REACT_ELEMENT_TYPE } from 'shared/ReactSymbols';\r\n\r\n\r\nexport class FiberNode {\r\n  tag: WorkTag;\r\n  pendingProps: Props;\r\n  key: Key;\r\n  stateNode: any;\r\n  type: any;\r\n  // 指向树状结构\r\n  return: FiberNode | null;\r\n  sibling: FiberNode | null;\r\n  child: FiberNode | null;\r\n  index: number;\r\n  ref: Ref | null;\r\n  // 作为工作单元\r\n  memoizedProps: Props | null;\r\n  alternate: FiberNode | null;\r\n  flags: Flags;\r\n  updateQueue: unknown;\r\n  subtreeFlags: Flags;\r\n  memoizedState: any;\r\n  constructor(tag: WorkTag, pendingProps: Props, key: Key) {\r\n    // 实例\r\n    this.tag = tag;\r\n    this.pendingProps = pendingProps;\r\n    this.key = key;\r\n    this.stateNode = null;\r\n    this.type = null;\r\n    // 指向树状结构\r\n    this.return = null;\r\n    this.sibling = null;\r\n    this.child = null;\r\n    this.index = 0;\r\n    this.ref = null;\r\n\r\n    // 作为工作单元\r\n    this.pendingProps = pendingProps;\r\n    this.memoizedProps = null;\r\n    this.memoizedState = null;\r\n    this.alternate = null;\r\n    // 副作用\r\n    this.flags = NoFlags;\r\n    this.subtreeFlags = NoFlags;\r\n    this.updateQueue = null;\r\n  }\r\n}\r\n\r\nexport class FiberRootNode {\r\n  container: Container;\r\n  current: FiberNode;\r\n  finishedWork: FiberNode | null;\r\n  constructor(container: Container, hostRootFiber: FiberNode) {\r\n    this.container = container;\r\n    this.current = hostRootFiber;\r\n    hostRootFiber.stateNode = this;\r\n    this.finishedWork = null;\r\n  }\r\n}\r\n\r\nexport const createWorkInProgress = (current: FiberNode, pendingProps: Props): FiberNode => {\r\n  let wip = current.alternate;\r\n  if (wip === null) {\r\n    // mount\r\n    wip = new FiberNode(current.tag, pendingProps, current.key);\r\n    wip.stateNode = current.stateNode;\r\n    wip.alternate = current;\r\n    current.alternate = wip;\r\n  } else {\r\n    // update\r\n    wip.pendingProps = pendingProps;\r\n    wip.flags = NoFlags;\r\n    wip.subtreeFlags = NoFlags;\r\n  }\r\n  wip.type = current.type;\r\n  wip.updateQueue = current.updateQueue;\r\n  wip.child = current.child;\r\n  wip.memoizedProps = current.memoizedProps;\r\n  wip.memoizedState = current.memoizedState;\r\n  return wip;\r\n}\r\n\r\nexport function createFiberFromElement(element: ReactElementType): FiberNode | null {\r\n  if (element === null || element === undefined) {\r\n    if (__DEV__) {\r\n      console.error('createElement received null or undefined element')\r\n    }\r\n    return null\r\n  }\r\n\r\n  const { type, props, $$typeof } = element\r\n\r\n  // 添加更详细的类型检查\r\n  if (!$$typeof || $$typeof !== REACT_ELEMENT_TYPE) {\r\n    if (__DEV__) {\r\n      console.error('Invalid React element type', element)\r\n    }\r\n    return null\r\n  }\r\n\r\n  if (type === undefined) {\r\n    if (__DEV__) {\r\n      console.error('Element type is undefined', element)\r\n    }\r\n    return null\r\n  }\r\n\r\n  let fiberTag: WorkTag\r\n\r\n  if (typeof type === 'function') {\r\n    fiberTag = FunctionComponent\r\n  } else if (typeof type === 'string') {\r\n    fiberTag = HostComponent\r\n  } else {\r\n    if (__DEV__) {\r\n      console.error('未实现的type类型', element)\r\n    }\r\n    return null\r\n  }\r\n\r\n  const fiber = new FiberNode(fiberTag, props, null)\r\n  fiber.type = type\r\n  return fiber\r\n}\r\n", "import { Action, Dispatch } from \"shared/ReactTypes\";  \r\n\r\nexport interface Update<State> {\r\n  action: Action<State>;\r\n  next: Update<State> | null;\r\n}\r\n\r\nexport interface UpdateQueue<State> {\r\n  shared: {\r\n    pending: Update<State> | null;\r\n  };\r\n  dispatch: Dispatch<State> | null;\r\n}\r\n\r\nexport const createUpdate = <State>(action: Action<State>): Update<State> => {\r\n  return {\r\n    action: action,\r\n    next: null,\r\n  };\r\n}\r\n\r\nexport const createUpdateQueue = <State>(): UpdateQueue<State> => {\r\n  return {\r\n    shared: { pending: null },\r\n    dispatch: null\r\n  };\r\n}\r\n\r\nexport const enqueueUpdate = <State>(updateQueue: UpdateQueue<State>, update: Update<State>) => {\r\n  updateQueue.shared.pending = update;\r\n}\r\n\r\nexport function processUpdateQueue<State>(baseState: State, updates: Update<State> | null): { memoizedState: State } {\r\n    let newState = baseState;\r\n    let currentUpdate = updates;\r\n\r\n    while (currentUpdate) {\r\n        const action = currentUpdate.action;\r\n        // 如果 action 是函数，调用它\r\n        newState = typeof action === 'function' \r\n            ? (action as (prevState: State) => State)(newState)\r\n            : action;\r\n        \r\n        currentUpdate = currentUpdate.next;\r\n    }\r\n\r\n    return { memoizedState: newState };\r\n}\r\n\r\n\r\n", "export type Container = Element | DocumentFragment;\r\nexport type Instance = any;\r\nexport type Text = any;\r\nexport type Props = any;\r\n\r\nexport function createInstance(type: string): Element {\r\n  const element = document.createElement(type);\r\n  return element;\r\n}\r\n\r\nexport function createTextInstance(content: string): Text {\r\n  return document.createTextNode(content);\r\n}\r\n\r\nexport function appendInitialChild(\r\n  parent: Container | Element,\r\n  child: Element | Text\r\n): void {\r\n  parent.appendChild(child);\r\n}\r\n\r\nexport function appendChildToContainer(\r\n  container: Container,\r\n  child: Element | Text\r\n): void {\r\n  container.appendChild(child);\r\n}\r\n\r\n", "import { REACT_ELEMENT_TYPE } from \"shared/ReactSymbols\";\r\nimport { createFiberFromElement, FiberNode } from \"./fiber\";\r\nimport { ReactElementType } from \"shared/ReactTypes\";\r\nimport { HostText } from \"./workTags\";\r\nimport { Placement } from \"./fiberFlags\";\r\nimport { createTextInstance } from '../../react-dom/src/hostConfig'\r\n\r\nfunction reconcileSingleElement(returnFiber: FiberNode, currentFirstChild: FiberNode | null, element: ReactElementType): FiberNode | null {\r\n  const fiber = createFiberFromElement(element);\r\n  \r\n  if (fiber === null) {\r\n    return null;\r\n  }\r\n\r\n  fiber.flags |= Placement;\r\n  fiber.return = returnFiber;\r\n  return fiber;\r\n}\r\n\r\nfunction reconcileSingleTextNode(returnFiber: FiberNode, currentFirstChild: FiberNode | null, content: string | number) {\r\n  const contentString = content + ''\r\n  const fiber = new FiberNode(HostText, { content: contentString }, null)\r\n  fiber.stateNode = createTextInstance(contentString)\r\n  fiber.flags |= Placement\r\n  fiber.return = returnFiber\r\n  return fiber\r\n}\r\n\r\nfunction reconcileChildrenArray(returnFiber: FiberNode, currentFirstChild: FiberNode | null, newChild: any[]) {\r\n  let previousNewFiber: FiberNode | null = null;\r\n  let resultingFirstChild: FiberNode | null = null;\r\n\r\n  for (let i = 0; i < newChild.length; i++) {\r\n    const child = newChild[i];\r\n    \r\n    if (child === null || child === undefined || child === false) {\r\n      continue;\r\n    }\r\n\r\n    let newFiber: FiberNode | null = null;\r\n\r\n    if (typeof child === 'string' || typeof child === 'number') {\r\n      newFiber = reconcileSingleTextNode(returnFiber, null, child);\r\n    } else if (typeof child === 'object' && child !== null) {\r\n      if (child.$$typeof === REACT_ELEMENT_TYPE) {\r\n        newFiber = createFiberFromElement(child);\r\n      }\r\n    }\r\n\r\n    if (newFiber === null) {\r\n      continue;\r\n    }\r\n\r\n    newFiber.flags |= Placement;\r\n    newFiber.return = returnFiber;\r\n\r\n    if (previousNewFiber === null) {\r\n      resultingFirstChild = newFiber;\r\n    } else {\r\n      previousNewFiber.sibling = newFiber;\r\n    }\r\n    previousNewFiber = newFiber;\r\n  }\r\n\r\n  return resultingFirstChild;\r\n}\r\n\r\nexport function reconcileChildFibers(returnFiber: FiberNode, currentFirstChild: FiberNode | null, newChild: any): FiberNode | null {\r\n  if (typeof newChild === 'object' && newChild !== null) {\r\n    if (newChild.$$typeof === REACT_ELEMENT_TYPE) {\r\n      return reconcileSingleElement(returnFiber, currentFirstChild, newChild);\r\n    }\r\n  }\r\n\r\n  if (Array.isArray(newChild)) {\r\n    return reconcileChildrenArray(returnFiber, currentFirstChild, newChild);\r\n  }\r\n\r\n  if (typeof newChild === 'string' || typeof newChild === 'number') {\r\n    return reconcileSingleTextNode(returnFiber, currentFirstChild, newChild);\r\n  }\r\n\r\n  if (newChild === null || newChild === undefined) {\r\n    return null;\r\n  }\r\n\r\n  if (__DEV__) {\r\n    console.warn('未实现的reconcile类型', newChild);\r\n  }\r\n  return null;\r\n}\r\n\r\nexport const mountChildFibers = reconcileChildFibers;", "\r\nimport { Dispatcher } from '../react/src/currentDispatcher'\r\nimport * as React from 'react';\r\nconst internals = React.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\r\n\r\nexport default internals\r\n", "import internals from 'shared/internals';\r\nimport { FiberNode } from './fiber';\r\nimport { Action, Dispatch } from 'shared/ReactTypes';\r\nimport { Dispatcher } from '../../react/src/currentDispatcher';\r\nimport { createUpdate, createUpdateQueue, enqueueUpdate, UpdateQueue } from './updateQueue';\r\nimport { scheduleUpdateOnFiber } from './workLoop';\r\n\r\nlet currentlyRenderingFiber: FiberNode | null = null;\r\nlet workInProgressHook: Hook | null = null;\r\n\r\nif (!internals) {\r\n  throw new Error('internals is undefined');\r\n}\r\n\r\nconst { currentDispatcher } = internals;\r\n\r\ninterface Hook {\r\n  memoizedState: any;\r\n  updateQueue: unknown;\r\n  next: Hook | null;\r\n}\r\n\r\nexport function renderWithHooks(wip: FiberNode) {\r\n  currentlyRenderingFiber = wip;\r\n  wip.memoizedProps = null;\r\n\r\n  const current = wip.alternate;\r\n\r\n  if (current !== null) {\r\n    wip.memoizedState = current.memoizedState;\r\n  } else {\r\n    currentDispatcher.current = HooksDispatcherOnMount;\r\n  }\r\n\r\n  const Component = wip.type;\r\n  const props = wip.pendingProps;\r\n\r\n  let children;\r\n  try {\r\n    children = Component(props);\r\n  } finally {\r\n    currentlyRenderingFiber = null;\r\n    workInProgressHook = null;\r\n    currentDispatcher.current = null;\r\n  }\r\n  \r\n  return children;\r\n}\r\n\r\nconst HooksDispatcherOnMount: Dispatcher = {\r\n  useState: mountState\r\n};\r\n\r\nfunction mountState<State>(\r\n  initialState: State | (() => State)\r\n): [State, Dispatch<State>] {\r\n  const hook = mountWorkInProgressHook();\r\n  let memoizedState: State;\r\n\r\n  if (typeof initialState === 'function') {\r\n    memoizedState = (initialState as () => State)();\r\n  } else {\r\n    memoizedState = initialState;\r\n  }\r\n\r\n  const queue = createUpdateQueue<State>();\r\n  hook.updateQueue = queue;\r\n\r\n  const dispatch: Dispatch<State> = (action) => {\r\n    dispatchSetState(\r\n      currentlyRenderingFiber as FiberNode,\r\n      queue,\r\n      action\r\n    );\r\n  };\r\n  \r\n  queue.dispatch = dispatch;\r\n\r\n  return [memoizedState, dispatch];\r\n}\r\n\r\nfunction dispatchSetState<State>(\r\n  fiber: FiberNode,\r\n  updateQueue: UpdateQueue<State>,\r\n  action: Action<State>\r\n) {\r\n  const update = createUpdate(action);\r\n  enqueueUpdate(updateQueue, update);\r\n  scheduleUpdateOnFiber(fiber);\r\n}\r\n\r\nfunction mountWorkInProgressHook(): Hook {\r\n  const hook: Hook = {\r\n    memoizedState: null,\r\n    updateQueue: null,\r\n    next: null\r\n  };\r\n\r\n  if (workInProgressHook === null) {\r\n    if (currentlyRenderingFiber === null) {\r\n      throw new Error('请在函数组件内使用hook');\r\n    } else {\r\n      workInProgressHook = hook;\r\n      currentlyRenderingFiber.memoizedState = workInProgressHook;\r\n    }\r\n  } else {\r\n    workInProgressHook.next = hook;\r\n    workInProgressHook = hook;\r\n  }\r\n  return workInProgressHook;\r\n}", "import { ReactElementType, Type } from \"shared/ReactTypes\";\r\nimport { FiberNode } from \"./fiber\";\r\nimport { UpdateQueue, processUpdateQueue } from \"./updateQueue\";\r\nimport { HostComponent, HostRoot, HostText, FunctionComponent } from \"./workTags\";\r\nimport { mountChildFibers, reconcileChildFibers } from \"./childFibers\";\r\nimport { renderWithHooks } from './fiberHooks';\r\nimport { createInstance } from '../../react-dom/src/hostConfig'\r\n\r\n// 定义 renderLanes 类型\r\ntype RenderLanes = number;\r\n\r\nexport function beginWork(wip: FiberNode, renderLanes: RenderLanes) {\r\n  // 比较，返回子fiberNode\r\n  switch (wip.tag) {\r\n    case HostRoot:\r\n      return updateHostRoot(wip, renderLanes);\r\n    case HostComponent:\r\n      return updateHostComponent(wip);\r\n    case HostText:\r\n      return null;\r\n    case FunctionComponent:\r\n      return updateFunctionComponent(wip);\r\n    default:\r\n      if (__DEV__) {\r\n        console.warn('beginWork未实现的类型');\r\n      }\r\n      break;\r\n  }\r\n  return null;\r\n}\r\n\r\nfunction updateHostRoot(wip: FiberNode, renderLanes: RenderLanes) {\r\n  const baseState = wip.memoizedState;\r\n  const updateQueue = wip.updateQueue as UpdateQueue<Element>;\r\n  const pending = updateQueue.shared.pending;\r\n  updateQueue.shared.pending = null;\r\n  const { memoizedState } = processUpdateQueue(baseState, pending);\r\n  wip.memoizedState = memoizedState;\r\n\r\n  const nextChildren = wip.memoizedState;\r\n  reconcileChildren(wip, nextChildren);\r\n  return wip.child;\r\n}\r\n\r\nfunction updateHostComponent(wip: FiberNode) {\r\n  if (!wip.stateNode) {\r\n    wip.stateNode = createInstance(wip.type)\r\n    \r\n    // 处理 props\r\n    for (const prop in wip.pendingProps) {\r\n      if (prop !== 'children') {\r\n        // 设置 DOM 属性\r\n        wip.stateNode[prop] = wip.pendingProps[prop]\r\n      }\r\n    }\r\n  }\r\n\r\n  const nextChildren = wip.pendingProps.children\r\n  reconcileChildren(wip, nextChildren)\r\n  return wip.child\r\n}\r\n\r\nfunction reconcileChildren(wip: FiberNode, children?: ReactElementType) {\r\n  const current = wip.alternate;\r\n\r\n  if (current !== null) {\r\n    // update\r\n    wip.child = reconcileChildFibers(wip, current?.child, children);\r\n  } else {\r\n    // mount\r\n    wip.child = mountChildFibers(wip, null, children);\r\n  }\r\n}\r\n\r\nfunction updateFunctionComponent(wip: FiberNode) {\r\n  const nextProps = wip.pendingProps;\r\n  const nextChildren = renderWithHooks(wip);\r\n\r\n  reconcileChildren(wip, nextChildren);\r\n  return wip.child;\r\n}\r\n", "import { FiberNode } from './fiber';\r\nimport { \r\n  createInstance, \r\n  createTextInstance, \r\n  appendInitialChild \r\n} from '../../react-dom/src/hostConfig';\r\nimport { HostComponent, HostText, HostRoot, FunctionComponent } from './workTags';\r\nimport { NoFlags } from './fiberFlags';\r\n\r\nexport const completeWork = (wip: FiberNode) => {\r\n  // 递归中的归\r\n  const newProps = wip.pendingProps;\r\n  const current = wip.alternate;\r\n\r\n  switch (wip.tag) {\r\n    case HostComponent:\r\n      if (current !== null && wip.stateNode) {\r\n        // update\r\n      } else {\r\n        // 1. 构建DOM\r\n        // 2. 将DOM插入到DOM树中\r\n        const instance = createInstance(wip.type);\r\n        appendAllChildren(instance, wip);\r\n        wip.stateNode = instance;\r\n      }\r\n      bubbleProperties(wip);\r\n      return null;\r\n    case HostText:\r\n      if (current !== null && wip.stateNode) {\r\n        // update\r\n      } else {\r\n        // mount\r\n        const instance = createTextInstance(newProps.content);\r\n        wip.stateNode = instance;\r\n      }\r\n      bubbleProperties(wip);\r\n      return null;\r\n    case HostRoot:\r\n      bubbleProperties(wip);\r\n      return null;\r\n    case FunctionComponent:\r\n      bubbleProperties(wip)\r\n      return null;\r\n    default:\r\n      if (__DEV__) {\r\n        console.warn('未处理的completeWork类型', wip);\r\n      }\r\n      return null;\r\n  }\r\n};\r\n\r\nfunction appendAllChildren(parent: Element, wip: FiberNode) {\r\n  let node = wip.child;\r\n\r\n  while (node !== null) {\r\n    if (node.tag === HostComponent || node.tag === HostText) {\r\n      if (node.stateNode) {\r\n        appendInitialChild(parent, node.stateNode);\r\n      }\r\n    } else if (node.child !== null) {\r\n      node.child.return = node;\r\n      node = node.child;\r\n      continue;\r\n    }\r\n\r\n    if (node === wip) {\r\n      return;\r\n    }\r\n\r\n    while (node.sibling === null) {\r\n      if (node.return === null || node.return === wip) {\r\n        return;\r\n      }\r\n      node = node.return;\r\n    }\r\n    node.sibling.return = node.return;\r\n    node = node.sibling;\r\n  }\r\n}\r\n\r\nfunction bubbleProperties(wip: FiberNode) {\r\n  let subtreeFlags = NoFlags;\r\n  let child = wip.child;\r\n\r\n  while (child !== null) {\r\n    subtreeFlags |= child.subtreeFlags;\r\n    subtreeFlags |= child.flags;\r\n    child.return = wip;\r\n    child = child.sibling;\r\n  }\r\n  wip.subtreeFlags = subtreeFlags;\r\n}\r\n", "import { FiberNode, FiberRootNode } from \"./fiber\";\r\nimport { MutationMask, NoFlags, Placement } from \"./fiberFlags\";\r\nimport { appendChildToContainer, Container } from \"../../react-dom/src/hostConfig\";\r\nimport { HostComponent, HostRoot, HostText, FunctionComponent } from \"./workTags\";\r\n\r\nlet nextEffect: FiberNode | null = null;\r\n\r\nexport const commitMutationEffects = (finishedWork: FiberNode) => {\r\n  commitMutationEffectsOnFiber(finishedWork);\r\n};\r\n\r\nfunction commitMutationEffectsOnFiber(finishedWork: FiberNode) {\r\n  const flags = finishedWork.flags;\r\n\r\n  if ((flags & Placement) !== NoFlags) {\r\n    commitPlacement(finishedWork);\r\n    finishedWork.flags &= ~Placement;\r\n  }\r\n\r\n  // 递归处理子节点\r\n  let child = finishedWork.child;\r\n  while (child !== null) {\r\n    commitMutationEffectsOnFiber(child);\r\n    child = child.sibling;\r\n  }\r\n}\r\n\r\nfunction commitPlacement(finishedWork: FiberNode) {\r\n  if (__DEV__) {\r\n    console.log('执行Placement操作', finishedWork);\r\n  }\r\n  // parent DOM\r\n  const hostParent = getHostParent(finishedWork);\r\n\r\n  // finishedWork ~~ DOM\r\n  if (hostParent !== null) {\r\n    appendPlacementNodeIntoContainer(finishedWork, hostParent);\r\n  }\r\n}\r\n\r\nfunction getHostParent(fiber: FiberNode): Container | null {\r\n  let parent = fiber.return;\r\n\r\n  while (parent) {\r\n    const parentTag = parent.tag;\r\n    if (parentTag === HostComponent) {\r\n      return parent.stateNode as Container;\r\n    }\r\n    if (parentTag === HostRoot) {\r\n      return (parent.stateNode as FiberRootNode).container;\r\n    }\r\n    parent = parent.return;\r\n  }\r\n  return null;\r\n}\r\n\r\nfunction appendPlacementNodeIntoContainer(\r\n  finishedWork: FiberNode,\r\n  hostParent: Container\r\n) {\r\n  // 处理 host 组件\r\n  if (finishedWork.tag === HostComponent || finishedWork.tag === HostText) {\r\n    appendChildToContainer(hostParent, finishedWork.stateNode);\r\n    return;\r\n  }\r\n\r\n  // 处理函数组件\r\n  if (finishedWork.tag === FunctionComponent) {\r\n    const child = finishedWork.child;\r\n    if (child !== null) {\r\n      appendPlacementNodeIntoContainer(child, hostParent);\r\n    }\r\n    return;\r\n  }\r\n\r\n  // 递归处理子节点\r\n  const child = finishedWork.child;\r\n  if (child !== null) {\r\n    appendPlacementNodeIntoContainer(child, hostParent);\r\n    let sibling = child.sibling;\r\n    while (sibling !== null) {\r\n      appendPlacementNodeIntoContainer(sibling, hostParent);\r\n      sibling = sibling.sibling;\r\n    }\r\n  }\r\n}\r\n\r\nexport function commitRoot(root: FiberRootNode) {\r\n  const finishedWork = root.finishedWork;\r\n\r\n  if (finishedWork === null) {\r\n    return;\r\n  }\r\n\r\n  if (__DEV__) {\r\n    console.log('commit阶段开始', finishedWork);\r\n  }\r\n\r\n  // 重置\r\n  root.finishedWork = null;\r\n\r\n  // 判断是否存在3个子阶段需要执行的操作\r\n  const subtreeHasEffect = (finishedWork.subtreeFlags & MutationMask) !== NoFlags;\r\n  const rootHasEffect = (finishedWork.flags & MutationMask) !== NoFlags;\r\n\r\n  if (subtreeHasEffect || rootHasEffect) {\r\n    // beforeMutation\r\n    // mutation\r\n    commitMutationEffects(finishedWork);\r\n    root.current = finishedWork;\r\n    // layout\r\n  } else {\r\n    root.current = finishedWork;\r\n  }\r\n}\r\n", "import { beginWork } from \"./beginWork\";\r\nimport { createWorkInProgress, FiberNode, FiberRootNode } from \"./fiber\";\r\nimport { completeWork } from \"./completeWork\";\r\nimport { HostRoot } from \"./workTags\";\r\nimport { commitRoot, commitMutationEffects } from \"./commitWork\";\r\nimport { MutationMask, NoFlags } from \"./fiberFlags\";\r\n\r\nlet workInProgressRenderLanes: number = 0;\r\nconst NoLanes = 0;\r\n\r\nlet workInProgress: FiberNode | null = null;\r\n\r\nfunction prepareFreshStack(root: FiberRootNode) {\r\n  workInProgress = createWorkInProgress(root.current, {});\r\n  workInProgressRenderLanes = NoLanes;\r\n}\r\n\r\nexport function scheduleUpdateOnFiber(fiber: FiberNode) {\r\n  // 调度\r\n  const root = markUpdateFromFiberToRoot(fiber);\r\n  if (root !== null) {\r\n    renderRoot(root);\r\n  }\r\n}\r\n\r\nfunction markUpdateFromFiberToRoot(fiber: FiberNode) {\r\n  let node = fiber;\r\n  let parent = node.return;\r\n  while (parent !== null) {\r\n    node = parent;\r\n    parent = node.return;\r\n  }\r\n  if (node.tag === HostRoot) {\r\n    return node.stateNode as FiberRootNode;\r\n  }\r\n  return null;\r\n}\r\n\r\nfunction renderRoot(root: FiberRootNode) {\r\n  // 初始化\r\n  prepareFreshStack(root);\r\n\r\n  do {\r\n    try {\r\n      workLoop();\r\n      break;\r\n    } catch (e) {\r\n      if (__DEV__) {\r\n        console.warn('workLoop发生错误', e);\r\n      }\r\n      workInProgress = null;\r\n    }\r\n  } while (true);\r\n\r\n  const finishedWork = root.current.alternate;\r\n  root.finishedWork = finishedWork;\r\n\r\n  // wip fiber树 变成 fiberRootNode树\r\n  commitRoot(root);\r\n}\r\n\r\nfunction workLoop() {\r\n  while (workInProgress !== null) {\r\n    performUnitOfWork(workInProgress);\r\n  }\r\n}\r\n\r\nfunction performUnitOfWork(fiber: FiberNode) {\r\n  const next = beginWork(fiber, workInProgressRenderLanes);\r\n  fiber.memoizedProps = fiber.pendingProps;\r\n  \r\n  if (next === null) {\r\n    completeUnitOfWork(fiber);\r\n  } else {\r\n    workInProgress = next;\r\n  }\r\n}\r\n\r\nfunction completeUnitOfWork(fiber: FiberNode) {\r\n  let node: FiberNode | null = fiber;\r\n  \r\n  do {\r\n    completeWork(node);\r\n    const sibling = node.sibling;\r\n    \r\n    if (sibling !== null) {\r\n      workInProgress = sibling;\r\n      return;\r\n    }\r\n    node = node.return;\r\n    workInProgress = node;\r\n  } while (node !== null);\r\n}\r\n", "import { FiberNode, FiberRootNode } from \"./fiber\";\r\nimport { Container } from \"../../react-dom/src/hostConfig\";\r\nimport { HostRoot } from \"./workTags\";\r\nimport { ReactElementType } from \"shared/ReactTypes\";\r\n\r\nimport { \r\n  createUpdateQueue, \r\n  createUpdate, \r\n  enqueueUpdate,\r\n  UpdateQueue\r\n} from \"./updateQueue\";\r\nimport { scheduleUpdateOnFiber } from \"./workLoop\";\r\n\r\nexport function createContainer(container: Container) {\r\n  const hostRootFiber = new FiberNode(HostRoot, {}, null);\r\n  const root = new FiberRootNode(container, hostRootFiber);\r\n  hostRootFiber.updateQueue = createUpdateQueue();\r\n  return root;\r\n}\r\n\r\nexport function updateContainer(element: ReactElementType, root: FiberRootNode) {\r\n  const hostRootFiber = root.current;\r\n  const update = createUpdate<ReactElementType>(element);\r\n  enqueueUpdate(hostRootFiber.updateQueue as UpdateQueue<ReactElementType>, update);\r\n  scheduleUpdateOnFiber(hostRootFiber);\r\n  return element;\r\n}\r\n", "import * as ReactDOM from './src/root'\r\n\r\nexport default ReactDOM;"],
  "mappings": "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",
  "names": ["child"]
}
